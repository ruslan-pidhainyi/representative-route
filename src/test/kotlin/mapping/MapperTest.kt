package mapping

import org.junit.jupiter.api.Assertions
import org.junit.jupiter.api.Test

class MapperTest {

    @Test
    fun `should map value to observation object`() {
        //given
        val mapper = Mapper()
        //when
        val observation : Observation = mapper.observationFrom(observationJson)
        //then
        Assertions.assertEquals(observation.numberOfPoints, observation.points().size)
    }

    @Test
    fun `should map value to observation object with`() {
        //given
        val mapper = Mapper()
        //when
        val observation : Observation = mapper.observationFrom(observationJson)
        //then
        Assertions.assertEquals(observation.numberOfPoints, observation.pointsWithTimePassedFromStart().size)
    }

    val observationJson = """
        {
   "id": "imo_9462794",
   "from_seq": 127,
   "to_seq": 128,
   "from_port": "DEBRV",
   "to_port": "DEHAM",
   "leg_duration": 36406308,
   "count": 135,
   "points": "[[8.489074, 53.615707, 1509423228430, 14.0], [8.476499, 53.621193, 1509423365984, 14.8], [8.463407, 53.626442, 1509423498599, 15.8], [8.450949, 53.631893, 1509423624892, 15.6], [8.438425, 53.63714, 1509423750263, 15.7], [8.425705, 53.64237, 1509423875907, 16.2], [8.413362, 53.647686, 1509423995905, 16.0], [8.40207, 53.653694, 1509424122410, 15.1], [8.391685, 53.660767, 1509424252838, null], [8.38106, 53.668125, 1509424386567, 15.5], [8.371273, 53.67503, 1509424512195, 15.5], [8.36147, 53.681942, 1509424638173, 15.6], [8.35174, 53.689133, 1509424764768, 15.6], [8.341848, 53.696323, 1509424896105, 15.2], [8.330597, 53.702843, 1509425027772, 15.7], [8.317647, 53.707928, 1509425153796, 15.6], [8.304735, 53.712753, 1509425280093, 15.5], [8.291754, 53.71756, 1509425406836, 15.3], [8.278397, 53.72238, 1509425538170, 15.5], [8.264918, 53.727448, 1509425670640, 15.2], [8.251772, 53.732243, 1509425801989, 15.0], [8.238685, 53.73704, 1509425933769, 14.8], [8.225785, 53.741833, 1509426064841, 14.8], [8.214272, 53.749012, 1509426209943, 14.6], [8.203225, 53.7557, 1509426348314, 14.8], [8.191493, 53.762455, 1509426486470, 15.7], [8.180179, 53.768787, 1509426612463, 15.7], [8.168968, 53.775585, 1509426744917, 15.3], [8.158669, 53.783253, 1509426907359, 15.5], [8.149273, 53.79046, 1509427033521, 15.4], [8.140268, 53.798195, 1509427140897, 15.2], [8.131505, 53.806007, 1509427272814, 15.5], [8.123161, 53.813587, 1509427398493, 15.4], [8.1147, 53.82152, 1509427530573, 15.6], [8.102908, 53.82791, 1509427662925, 15.6], [8.089077, 53.831722, 1509427787802, 15.8], [8.074404, 53.835754, 1509427920096, 15.6], [8.060509, 53.83998, 1509428046417, 15.9], [8.045802, 53.844505, 1509428178816, 16.0], [8.032042, 53.848766, 1509428304202, 16.0], [8.017569, 53.852768, 1509428430868, 16.1], [7.999075, 53.85513, 1509428580496, 16.3], [7.984145, 53.857067, 1509428700494, 16.3], [7.96918, 53.859047, 1509428820141, 16.4], [7.954177, 53.860977, 1509428940096, 16.0], [7.939217, 53.863, 1509429078174, 12.3], [7.925858, 53.86611, 1509429258177, 9.2], [7.914017, 53.871212, 1509429464556, 9.1], [7.899707, 53.884533, 1509429751982, 14.5], [7.952, 53.947884, 1509430709000, 17.7], [7.969037, 53.954887, 1509430856523, 17.8], [7.985432, 53.961674, 1509430999908, 17.6], [8.000702, 53.96636, 1509431126064, 17.4], [8.068635, 53.976402, 1509431630000, 17.7], [8.181245, 53.988316, 1509432562000, 12.0], [8.285118, 53.99217, 1509433518000, 17.9], [8.338513, 53.99114, 1509433918843, 18.1], [8.412742, 53.981644, 1509434459000, 15.2], [8.430034, 53.979412, 1509434608942, 14.9], [8.48435, 53.97522, 1509435170207, 8.1], [8.485245, 53.97039, 1509435401000, 2.3], [8.483795, 53.970413, 1509435630183, 0.5], [8.485467, 53.971024, 1509436005920, 0.2], [8.4855, 53.970966, 1509436367000, 0.1], [8.485495, 53.970783, 1509437446000, 0.2], [8.48543, 53.97106, 1509438525000, 0.1], [8.485392, 53.97094, 1509439606000, 0.0], [8.485356, 53.971344, 1509440865000, 0.1], [8.483173, 53.971874, 1509441853544, 1.7], [8.485422, 53.969368, 1509442073734, 6.5], [8.577615, 53.96345, 1509442864877, 17.5], [8.593781, 53.9606, 1509442990015, 17.2], [8.607795, 53.956654, 1509443104348, 17.5], [8.62404, 53.951927, 1509443235909, 17.4], [8.637468, 53.945606, 1509443387929, 17.1], [8.649365, 53.939175, 1509443482853, 17.2], [8.659675, 53.932106, 1509443602082, 16.9], [8.668192, 53.923138, 1509443733759, 16.8], [8.67596, 53.914875, 1509443854801, 16.8], [8.685498, 53.9047, 1509444003983, 17.0], [8.694522, 53.895187, 1509444142771, 16.9], [8.702583, 53.887173, 1509444262652, 16.9], [8.711647, 53.879265, 1509444382696, 17.4], [8.721909, 53.871655, 1509444502695, 17.5], [8.732482, 53.86414, 1509444622694, 17.9], [8.745005, 53.856827, 1509444760149, 14.3], [8.76289, 53.847626, 1509444976152, 15.4], [8.800993, 53.838215, 1509445300006, 17.1], [8.822984, 53.83769, 1509445462135, 17.4], [8.845422, 53.83749, 1509445624107, 17.5], [8.864754, 53.838467, 1509445768152, 17.2], [8.880161, 53.83951, 1509445881815, 17.4], [8.896463, 53.84091, 1509446001829, 17.6], [8.914507, 53.842613, 1509446134297, 17.7], [8.967432, 53.847847, 1509446533000, 17.7], [9.084991, 53.873055, 1509447469000, 15.8], [9.149283, 53.879135, 1509448375000, 10.0], [9.274812, 53.867405, 1509449574000, 16.8], [9.362148, 53.8224, 1509450483000, 16.5], [9.403116, 53.755856, 1509451385000, 16.6], [9.467651, 53.71953, 1509452079874, 16.4], [9.485026, 53.70778, 1509452287000, 16.3], [9.512027, 53.66102, 1509452979898, 11.1], [9.516508, 53.651028, 1509453192000, 11.3], [9.534456, 53.62762, 1509453575802, 15.7], [9.545439, 53.621155, 1509453702101, 15.9], [9.563478, 53.614265, 1509453876143, 15.6], [9.575969, 53.607906, 1509454013767, 15.5], [9.589947, 53.59912, 1509454181768, 15.6], [9.601033, 53.592575, 1509454314379, 15.4], [9.612224, 53.58605, 1509454446492, 13.6], [9.624389, 53.579628, 1509454614630, 12.0], [9.637308, 53.57438, 1509454766781, 14.2], [9.652311, 53.569733, 1509454916470, 14.6], [9.668235, 53.567635, 1509455060311, 14.6], [9.68436, 53.566265, 1509455210280, 13.6], [9.700392, 53.565025, 1509455366230, 13.0], [9.716828, 53.563667, 1509455532411, 12.5], [9.732391, 53.562374, 1509455702326, 11.2], [9.748999, 53.560986, 1509455901721, 10.5], [9.764972, 53.55969, 1509456101400, 10.4], [9.780318, 53.55824, 1509456293220, 10.3], [9.795575, 53.55558, 1509456491621, 10.3], [9.8112, 53.55279, 1509456701421, 8.9], [9.825953, 53.55022, 1509456962617, 6.7], [9.840457, 53.547367, 1509457223000, 9.3], [9.855545, 53.544693, 1509457421435, 10.6], [9.871674, 53.54232, 1509457621906, 9.9], [9.888063, 53.541286, 1509457902214, 6.3], [9.897292, 53.5408, 1509458086574, 5.9], [9.903055, 53.53818, 1509458282814, 3.9], [9.905332, 53.536285, 1509458468638, 1.8], [9.90766, 53.53608, 1509458651802, 1.4], [9.909268, 53.536495, 1509458871452, 0.4], [9.909705, 53.53625, 1509459634738, 0.0]]"
 }
    """.trimIndent()
}
